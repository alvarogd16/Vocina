!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).rexspiralcurveplugin=e()}(this,function(){"use strict";function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function t(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function r(s){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=u(s);if(i){var n=u(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return a(this,t)}}function o(t){return null==t||""===t||0===t.length}var e=Phaser.Curves.Curve,P=Phaser.Utils.Objects.GetValue,w=Phaser.Math.DegToRad,h=Phaser.Math.RadToDeg,m=Phaser.Math.Vector2,O=Phaser.Tweens.Builders.GetEaseFunction,l=Phaser.Math.Linear,d=function(){i(A,e);var k=r(A);function A(t,e,n,s,i,u,a){var r,o,h,d,c,f,l,y,R,_,p,g,v,X;if(x(this,A),"object"===b(t)){var Y=t;h=Y.hasOwnProperty("x")?o=Y.x:(o=P(Y,"startX",0),P(Y,"endX",o)),d=P(Y,"easeX","Linear"),f=Y.hasOwnProperty("y")?c=Y.y:(c=P(Y,"startY",0),P(Y,"endY",c)),l=P(Y,"easeY","Linear"),g=Y.hasOwnProperty("startRadius")?(y=Y.startRadius,R=P(Y,"endRadius",p=y)):(R=Y.hasOwnProperty("xRadius")?y=Y.xRadius:(y=P(Y,"startXRadius",0),P(Y,"endXRadius",y)),Y.hasOwnProperty("yRadius")?p=Y.yRadius:(p=P(Y,"startYRadius",y),P(Y,"endYRadius",R))),_=P(Y,"easeXRadius","Linear"),v=P(Y,"easeXRadius",_),i=P(Y,"startAngle",0),u=P(Y,"endAngle",360),X=P(Y,"easeAngle","Linear"),a=P(Y,"rotation",0)}else void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===s&&(s=0),void 0===i&&(i=0),void 0===u&&(u=360),void 0===a&&(a=0),h=o=t,f=c=e,p=y=n,g=R=s,X=v=_=l=d="Linear";return(r=k.call(this,"SpiralCurve")).p0=new m(o,c),r.p1=new m(h,f),r._easeX=d,r._easeXFunction=O(d),r._easeY=l,r._easeYFunction=O(l),r._startXRadius=y,r._endXRadius=R,r._easeXRadius=_,r._easeXRadiusFunction=O(_),r._startYRadius=p,r._endYRadius=g,r._easeYRadius=v,r._easeYRadiusFunction=O(v),r._startAngle=w(i),r._endAngle=w(u),r._easeAngle=X,r._easeAngleFunction=O(X),r._rotation=w(a),r}return t(A,[{key:"getResolution",value:function(t){return 2*t}},{key:"getStartPoint",value:function(t){return this.getPoint(0,t)}},{key:"getPoint",value:function(t,e){void 0===e&&(e=new m);var n=l(this.p0.x,this.p1.x,this._easeXFunction(t)),s=l(this.p0.y,this.p1.y,this._easeYFunction(t)),i=l(this._startAngle,this._endAngle,this._easeAngleFunction(t)),u=l(this._startXRadius,this._endXRadius,this._easeXRadiusFunction(t)),a=l(this._startYRadius,this._endYRadius,this._easeYRadiusFunction(t)),r=n+u*Math.cos(i),o=s+a*Math.sin(i);if(0!==this._rotation){var h=Math.cos(this._rotation),d=Math.sin(this._rotation),c=r-n,f=o-s;r=c*h-f*d+n,o=c*d+f*h+s}return e.set(r,o)}},{key:"setStartX",value:function(t){return this.startX=t,this}},{key:"setEndX",value:function(t){return this.endX=t,this}},{key:"setEaseX",value:function(t){return this.easeX=t,this}},{key:"setStartY",value:function(t){return this.startY=t,this}},{key:"setEndY",value:function(t){return this.endY=t,this}},{key:"setEaseY",value:function(t){return this.easeY=t,this}},{key:"setXRadius",value:function(t){return this.xRadius=t,this}},{key:"setStartXRadius",value:function(t){return this.startXRadius=t,this}},{key:"setEndXRadius",value:function(t){return this.endXRadius=t,this}},{key:"setEaseXRadius",value:function(t){return this.easeXRadius=t,this}},{key:"setYRadius",value:function(t){return this.startYRadius=t,this.endYRadius=t,this}},{key:"setStartYRadius",value:function(t){return this.startYRadius=t,this}},{key:"setEndYRadius",value:function(t){return this.endYRadius=t,this}},{key:"setEaseYRadius",value:function(t){return this.easeYRadius=t,this}},{key:"setWidth",value:function(t){var e=this.xRadius/t;return this._startXRadius*=e,this._endXRadius*=e,this}},{key:"setHeight",value:function(t){var e=this.yRadius/t;return this._startYRadius*=e,this._endYRadius*=e,this}},{key:"setStartAngle",value:function(t){return this.startAngle=t,this}},{key:"setEndAngle",value:function(t){return this.endAngle=t,this}},{key:"setEaseAngle",value:function(t){return this.easeAngle=t,this}},{key:"setRotation",value:function(t){return this.rotation=t,this}},{key:"toJSON",value:function(){return{type:this.type,startX:this.p0.x,startY:this.p0.y,endX:this.p1.x,endY:this.p1.y,startXRadius:this._startXRadius,endXRadius:this._endXRadius,easeXRadius:this._easeXRadius,startYRadius:this._startYRadius,endYRadius:this._endYRadius,easeYRadius:this._easeYRadius,startAngle:h(this._startAngle),endAngle:h(this._endAngle),easeAngle:this._easeAngle,rotation:h(this._rotation)}}},{key:"x",get:function(){return this.p0.x},set:function(t){var e=t-this.p0.x;this.p0.x+=e,this.p1.x+=e}},{key:"y",get:function(){return this.p0.y},set:function(t){var e=t-this.p0.y;this.p0.y+=e,this.p1.y+=e}},{key:"startX",get:function(){return this.p0.x},set:function(t){this.p0.x=t}},{key:"endX",get:function(){return this.p1.x},set:function(t){this.p1.x=t}},{key:"easeX",get:function(){return this._easeX},set:function(t){this._easeX=t,this._easeXFunction=O(t)}},{key:"startY",get:function(){return this.p0.y},set:function(t){this.p0.y=t}},{key:"endY",get:function(){return this.p1.y},set:function(t){this.p1.y=t}},{key:"easeY",get:function(){return this._easeY},set:function(t){this._easeY=t,this._easeYFunction=O(t)}},{key:"xRadius",get:function(){return Math.max(this._startXRadius,this._endXRadius)},set:function(t){this._startXRadius=t,this._endXRadius=t}},{key:"startXRadius",get:function(){return this._startXRadius},set:function(t){this._startXRadius=t}},{key:"endXRadius",get:function(){return this._endXRadius},set:function(t){this._endXRadius=t}},{key:"easeXRadius",get:function(){return this._easeXRadius},set:function(t){this._easeXRadius=t,this._easeXRadiusFunction=O(t)}},{key:"yRadius",get:function(){return Math.max(this._startYRadius,this._endYRadius)},set:function(t){this._startYRadius=t,this._endYRadius=t}},{key:"startYRadius",get:function(){return this._startYRadius},set:function(t){this._startYRadius=t}},{key:"endYRadius",get:function(){return this._endYRadius},set:function(t){this._endYRadius=t}},{key:"easeYRadius",get:function(){return this._easeYRadius},set:function(t){this._easeYRadius=t,this._easeYRadiusFunction=O(t)}},{key:"startAngle",get:function(){return h(this._startAngle)},set:function(t){this._startAngle=w(t)}},{key:"endAngle",get:function(){return h(this._endAngle)},set:function(t){this._endAngle=w(t)}},{key:"easeAngle",get:function(){return this._easeAngle},set:function(t){this._easeAngle=t,this._easeAngleFunction=O(t)}},{key:"angle",get:function(){return h(this._rotation)},set:function(t){this._rotation=w(t)}},{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t}}],[{key:"fromJSON",value:function(t){return new A(t)}}]),A}(),c=function(){i(n,Phaser.Plugins.BasePlugin);var e=r(n);function n(t){return x(this,n),e.call(this,t)}return t(n,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function(t,e,n,s,i,u,a){return new d(t,e,n,s,i,u,a)}}]),n}();return function(t,e,n){if("object"===b(t)){if(o(e)){if(null==n)return;"object"===b(n)&&(t=n)}else{"string"==typeof e&&(e=e.split("."));var s=e.pop();(function(t,e,n){var s=t;if(!o(e)){var i;"string"==typeof e&&(e=e.split("."));for(var u=0,a=e.length;u<a;u++){var r;if(null==s[i=e[u]]||"object"!==b(s[i]))r=u!==a-1||void 0===n?{}:n,s[i]=r;s=s[i]}}return s})(t,e)[s]=n}}}(window,"RexPlugins.Curve.SpiralCurve",d),c});
